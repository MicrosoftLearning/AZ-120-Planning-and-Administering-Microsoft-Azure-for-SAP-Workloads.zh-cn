# 演示：在门户中创建虚拟机

在本演示中，我们将在门户中创建并访问 Windows 虚拟机。

## 创建虚拟机

1. 在 Azure 门户的左上角选择“**创建资源**”。
2. 在 Azure 市场资源列表上方的搜索框中，搜索“**Windows Server 2016 Datacenter**”。找到映像后，单击“**创建**”。
3. 在“**基本**”选项卡的“**项目详细信息**”中，确保已选择正确的订阅，然后选择“**新建**”资源组。为名称键入“*myResourceGroup*”。

    ![为 VM 创建新资源组](Images/AZ103_Demo_Creating_VMs1.png)

4. 在“**实例详细信息**”下，键入“*myVM*”作为“**虚拟机名称**”， 并选择“*美国东部*”作为你的“**位置**”。保留其余默认值。

    ![实例详细信息部分](Images/AZ103_Demo_Creating_VMs2.png)

5. 在“**管理员帐户**”下，输入用户名（例如“*azureuser*”）和密码。密码长度必须至少为 12 个字符，并且符合定义的复杂性要求。

    ![输入用户名和密码](Images/AZ103_Demo_Creating_VMs3.png)

6. 在“**入站端口规则**”中，选择“**允许选定的端口**”，然后从下拉列表中选择“**RDP (3389)**”和“**HTTP**”。

    ![打开 RDP 和 HTTP 的端口](Images/AZ103_Demo_Creating_VMs4.png)

7. 移至“**管理**”选项卡，在“**监控**”中“**关闭**”启动诊断。这将消除验证错误。 
8. 保留其余默认值，然后选择页面底部的“**查看 + 创建**”按钮。等待验证，然后单击“**创建**”。 

    ![查看并创建](Images/AZ103_Demo_Creating_VMs5.png)

## 连接到虚拟机

创建与虚拟机的远程桌面连接。这些说明让你知道如何从 Windows 计算机连接到 VM。在 Mac 上，你需要从 Mac App Store 安装 RDP 客户端。

1. 在虚拟机属性页面上，选择“**连接**”按钮。
2. 在“**连接到虚拟机**”页面，保留默认选项，按 DNS 名称通过端口 3389 进行连接，然后单击“**下载 RDP 文件**”。
3. 打开下载的 RDP 文件并在出现提示时选择“**连接**”。
4. 在“**Windows 安全**”窗口中，选择“**更多选项**”，然后选择“**使用其他帐户**”。键入 localhost\username 作为用户名，输入为虚拟机创建的密码，然后选择“**确定**”。
5. 在登录过程中，你可能会收到证书警告。选择“**是**”或“**继续**”，创建连接。

## 安装 Web 服务器

要查看运行中的 VM，请安装 IIS Web 服务器。在 VM 上打开 PowerShell 提示符并运行以下命令：

```PowerShell
Install-WindowsFeature -name Web-Server -IncludeManagementTools
```

完成后，关闭与 VM 的 RDP 连接。

## 查看 IIS 欢迎页面

在门户中选择 VM，然后在 VM 的概述部分，使用公共 IP 地址右侧的“**单击以复制**”按钮将其复制并粘贴到浏览器选项卡中。随即将打开默认的 IIS 欢迎页面。

![IIS 默认站点](Images/AZ103_Demo_Creating_VMs6.png)

## 清理资源

>**备注：** 不再需要时，可以删除资源组、虚拟机和所有相关资源。为此，请选择虚拟机的资源组，选择“**删除**”，然后确认要删除的资源组的名称。
